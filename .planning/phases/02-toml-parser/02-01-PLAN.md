---
phase: 02-toml-parser
plan: 01
type: execute
---

<objective>
Add dependencies and create immutable configuration model POJOs.

Purpose: Establish the foundation for TOML parsing with Jackson 3.0.3 and validation with requirements.java 12.0. Define type-safe configuration structures.
Output: Dependencies configured, BillConfig/ProjectInfo/Dependency/BuildSettings POJOs created.
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/CONVENTIONS.md
@.planning/phases/02-toml-parser/02-RESEARCH.md
@.planning/phases/02-toml-parser/02-CONTEXT.md
@.planning/phases/01-foundation/01-02-SUMMARY.md
@pom.xml
@toml/pom.xml

**Tech stack available:**
- Maven parent POM with JDK 25 configuration
- TestNG 7.10.2 for testing
- toml module skeleton ready for implementation

**Constraining decisions:**
- JDK 25 as compiler target (Phase 1)
- Standard Maven conventions (Phase 1)
- Use Maven version format, not strict SemVer (Phase 2 decision)
- Use Jackson 3.0.3 for TOML parsing (RESEARCH.md)
- Use requirements.java 12.0 for all validation (CONVENTIONS.md)
- [project] section instead of [package] in bill.toml (CONTEXT.md)

**Key requirements:**
- Error reporting quality is #1 priority - show ALL errors at once (CONTEXT.md)
- Dependencies use Maven coordinates as keys: "groupId:artifactId" (CONTEXT.md)
- Immutable config objects (RESEARCH.md architecture patterns)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Jackson 3.0.3 and requirements.java 12.0 dependencies</name>
  <files>pom.xml, toml/pom.xml</files>
  <action>
    Add Jackson BOM 3.0.3 to root pom.xml dependencyManagement (groupId: tools.jackson, artifactId: jackson-bom, version: 3.0.3, type: pom, scope: import).

    Add jackson-dataformat-toml to root pom.xml dependencyManagement (groupId: tools.jackson.dataformat, artifactId: jackson-dataformat-toml, no version - managed by BOM).

    Add requirements-java 12.0 to root pom.xml dependencyManagement (groupId: io.github.cowwoc.requirements, artifactId: requirements-java, version: 12.0).

    Add jackson-dataformat-toml and requirements-java to toml/pom.xml dependencies section (no versions - managed by parent).

    Do NOT mix Jackson 2.x and 3.x packages. Jackson 3.x uses tools.jackson.* package, not com.fasterxml.jackson.* (RESEARCH.md Pitfall 1).
  </action>
  <verify>mvn dependency:tree -pl toml shows jackson-dataformat-toml 3.0.3 and requirements-java 12.0</verify>
  <done>Dependencies added to parent POM dependencyManagement and toml module POM. Build succeeds.</done>
</task>

<task type="auto">
  <name>Task 2: Create immutable configuration model POJOs</name>
  <files>toml/src/main/java/io/github/cowwoc/bill/toml/ProjectInfo.java, toml/src/main/java/io/github/cowwoc/bill/toml/Dependency.java, toml/src/main/java/io/github/cowwoc/bill/toml/BuildSettings.java, toml/src/main/java/io/github/cowwoc/bill/toml/BillConfig.java</files>
  <action>
    Create ProjectInfo record in toml/src/main/java/io/github/cowwoc/bill/toml/:
    - Fields: name (String), version (String), description (String, nullable)
    - Use @JsonProperty annotations for TOML field mapping
    - Import from tools.jackson.annotation.JsonProperty (Jackson 3.x package)

    Create Dependency record:
    - Fields: coordinates (String - "groupId:artifactId"), version (String), scope (String)
    - Compact constructor with default scope = "compile" if null
    - Use @JsonProperty for TOML mapping

    Create BuildSettings record:
    - Fields: release (String - JDK version)
    - Compact constructor with default release = "25" if null
    - Use @JsonProperty for TOML mapping

    Create BillConfig record:
    - Fields: project (ProjectInfo), dependencies (Map<String, Dependency> - key is coordinates), build (BuildSettings, nullable)
    - Use @JsonProperty("project") for ProjectInfo, @JsonProperty("dependencies") for dependencies map
    - Compact constructor to ensure dependencies is never null (empty map if not provided)

    Follow Allman brace style (braces on new lines) per CONVENTIONS.md.
    Use 2-space indentation per CONVENTIONS.md.

    These are pure data structures (no behavior to test-drive). Jackson handles deserialization.
  </action>
  <verify>mvn compile -pl toml succeeds. Records compile without errors.</verify>
  <done>All POJOs created as immutable records with Jackson 3.x annotations. Clean compilation.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] mvn clean install succeeds
- [ ] Jackson BOM 3.0.3 appears in dependency:tree
- [ ] jackson-dataformat-toml 3.0.3 present in toml module
- [ ] requirements-java 12.0 present in toml module
- [ ] All POJOs compile cleanly
- [ ] No Jackson 2.x dependencies (verify package is tools.jackson.*, not com.fasterxml.jackson.*)
</verification>

<success_criteria>

- All tasks completed
- Dependencies configured correctly in parent and toml POMs
- Immutable config model POJOs created as records
- No TypeScript or compilation errors
- Ready for Plan 2 (TDD TOML parsing)
</success_criteria>

<output>
After completion, create `.planning/phases/02-toml-parser/02-01-SUMMARY.md`
</output>
